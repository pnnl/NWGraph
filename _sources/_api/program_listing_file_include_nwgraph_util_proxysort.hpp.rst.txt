
.. _program_listing_file_include_nwgraph_util_proxysort.hpp:

Program Listing for File proxysort.hpp
======================================

|exhale_lsh| :ref:`Return to documentation for file <file_include_nwgraph_util_proxysort.hpp>` (``include/nwgraph/util/proxysort.hpp``)

.. |exhale_lsh| unicode:: U+021B0 .. UPWARDS ARROW WITH TIP LEFTWARDS

.. code-block:: cpp

   
   #ifndef NW_UTIL_PROXYSORT_HPP
   #define NW_UTIL_PROXYSORT_HPP
   
   #include <algorithm>
   #include <cassert>
   #include <cstddef>
   #include <cstdint>
   #include <execution>
   #include <functional>
   #include <numeric>
   #include <vector>
   
   namespace nw {
   namespace util {
   
   // template<typename ThingToSort, typename Comparator>
   // void proxysort(const ThingToSort& x, std::vector<size_t>& perm) {
   //   std::iota(perm.begin(), perm.end(), 0);
   //  std::sort(perm.begin(), perm.end(), [&](auto a, auto b) { return x(a) > x(b); });
   //}
   
   template <typename ThingToSort, typename Comparator, typename IntT, class ExecutionPolicy = std::execution::parallel_unsequenced_policy>
   void proxysort(const ThingToSort& x, std::vector<IntT>& perm, Comparator comp = std::less<IntT>(), ExecutionPolicy policy = {}) {
     assert(perm.size() == x.size());
   
     std::iota(perm.begin(), perm.end(), 0);
   
     assert(perm.begin() != perm.end());
   
     std::sort(/*policy,*/ perm.begin(), perm.end(), [&](auto a, auto b) {
       assert(perm.size() == x.size());
       assert(a < x.size());
       assert(b < x.size());
       return comp(x[a], x[b]);
     });
   }
   
   template <typename IntT         = uint32_t, typename Comparator, typename ThingToSort,
             class ExecutionPolicy = std::execution::parallel_unsequenced_policy>
   auto proxysort(const ThingToSort& x, Comparator comp = std::less<IntT>(), ExecutionPolicy policy = {}) {
     std::vector<IntT> perm(x.size());
     proxysort(x, perm, comp, policy);
     return perm;
   }
   
   }    // namespace util
   }    // namespace nw
   
   #endif    // NW_UTIL_PROXYSORT_HPP
