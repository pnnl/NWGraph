

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quickstart &mdash; NW Graph 0.10.15 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=649a27d8" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/collapsible-lists/css/tree_view.css?v=a885cde7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=afbbf639" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=a8af70a8"></script>
      <script src="../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script src="../_static/collapsible-lists/js/CollapsibleLists.compressed.js?v=73120307"></script>
      <script src="../_static/collapsible-lists/js/apply-collapsible-lists.js?v=660e4f45"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Benchmarking with NWGraph" href="benchmarking.html" />
    <link rel="prev" title="Welcome to the Documentation for NW Graph!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            NW Graph
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#project-organization">Project Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-compile">How to Compile</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compilation">Compilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-everything">Building Everything</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-specific-components">Building Specific Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-output-locations">Build Output Locations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cmake-options">CMake Options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-documentation">Building Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#documentation-dependencies">Documentation Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-via-cmake">Building via CMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation-targets">Documentation Targets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-directly-with-sphinx">Building Directly with Sphinx</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-code-in-nwgraph">Running code in NWGraph</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supported-graph-file-format">Supported graph file format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-benchmarks">Running benchmarks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#breadth-first-search">Breadth-first Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connected-component-decomposition">Connected Component Decomposition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pagerank">PageRank</a></li>
<li class="toctree-l3"><a class="reference internal" href="#single-source-shortest-path">Single Source Shortest Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#triangle-counting">Triangle Counting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#betweenness-centrality">Betweenness Centrality</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-useful-things">Other useful things</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#relabel-by-degree">Relabel-by-degree</a></li>
<li class="toctree-l4"><a class="reference internal" href="#upper-triangular-order">Upper Triangular Order</a></li>
<li class="toctree-l4"><a class="reference internal" href="#verifier">Verifier</a></li>
<li class="toctree-l4"><a class="reference internal" href="#multi-threading">Multi-threading</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#benchmarking-with-gap-datasets">Benchmarking with GAP Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#benchmarking-abstraction-penalties">Benchmarking abstraction penalties</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-is-abstraction-penalty">What is abstraction penalty?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-abstraction-penalty-experiments">Running abstraction penalty experiments</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="benchmarking.html">Benchmarking with NWGraph</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">NWGraph: The Northwest Graph Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="graph-background-ii.html">Graph Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="generic-programming.html">Generic Programming in C++20</a></li>
<li class="toctree-l1"><a class="reference internal" href="graph-concepts.html">Generic Graph Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">NWGraph Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="adaptors.html">Graph Range Adaptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-structures.html">Model Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Performance Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="related.html">Related Libraries and Toolkits</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References Cited</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../nwgraph_api.html">NWGraph API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NW Graph</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Quickstart</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/userguide/getting_started.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><img alt="Build with gcc-11" src="https://github.com/NWmath/NWgr/workflows/Build%20with%20gcc-11/badge.svg" /> <img alt="image1" src="https://github.com/NWmath/NWgr/workflows/Build%20with%20gcc-11/badge.svg?branch=sc_release" /> <img alt="image2" src="https://github.com/NWmath/NWgr/workflows/Build%20with%20gcc-11%20(Mac)/badge.svg?branch=sc_release" /> <a class="reference external" href="https://www.codacy.com?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=NWmath/NWgr&amp;utm_campaign=Badge_Grade"><img alt="Codacy Badge" src="https://app.codacy.com/project/badge/Grade/0788903a1d134b47b351e6a346123875" /></a></p>
<section id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Link to this heading"></a></h1>
<p>NWGraph is a high-performance header-only generic C++ graph library,
based on C++20 <code class="docutils literal notranslate"><span class="pre">concept</span></code> and <code class="docutils literal notranslate"><span class="pre">range</span></code> language feature. It consists
of multiple graph algorithms for well-known graph kernels and supporting
data structures. Both sequential and parallel algorithms are available.</p>
<section id="project-organization">
<h2>Project Organization<a class="headerlink" href="#project-organization" title="Link to this heading"></a></h2>
<p>The organization of our library is shown as follow:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$NWGraph_HOME/
├── README.md
├── CMakeLists.txt
├── apb/
├── bench/
├── examples/
│   └── imdb/
├── include/
│   └── nwgraph/
│       ├── adaptors/
│       ├── algorithms/
│       ├── containers/
│       ├── experimental/
│       │   └── algorithms/
│       ├── graphs/
│       ├── io/
│       ├── util/
│       ├── graph_concepts.hpp
│       └── ...
├── test/
└── ...
</pre></div>
</div>
<p>The genericity of different algorithms available in the NWGraph library
stems from a taxonomy of graph concepts. The definition of these
concepts can be found in the <code class="docutils literal notranslate"><span class="pre">include/nwgraph/graph_concepts.hpp</span></code>
file. The header files containing various sequential and parallel graph
algorithms for well-known graph kernels can be found under the
<code class="docutils literal notranslate"><span class="pre">$NWGraph_HOME/include/nwgraph/algorithms/</span></code> directory (some of the
experimental algorithms are located in
the<code class="docutils literal notranslate"><span class="pre">$NWGraph_HOME/include/nwgraph/experimental/algorithms/</span></code>
subdirectory). The header files for the range adaptors are under
<code class="docutils literal notranslate"><span class="pre">$NWGraph_HOME/include/nwgraph/adaptors/</span></code> directory. The code for the
applications is located in the <code class="docutils literal notranslate"><span class="pre">$NWGraph_HOME/bench/</span></code> diretory. The
abstraction penalty benchmark for benchmarking different containers and
a variety of different ways to iterate through a graph (including the
use of graphadaptors) are under the <code class="docutils literal notranslate"><span class="pre">$NWGraph_HOME/apb/</span></code> directory.
Various examples of how to use NWGraph can be found in the
<code class="docutils literal notranslate"><span class="pre">$NWGraph_HOME/example/imdb/</span></code> directory.</p>
</section>
<section id="how-to-compile">
<h2>How to Compile<a class="headerlink" href="#how-to-compile" title="Link to this heading"></a></h2>
<p>NWGraph uses <a class="reference external" href="https://github.com/oneapi-src/oneTBB">Intel OneTBB</a> as
the parallel backend.</p>
<section id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>CMake &gt;= 3.20</p></li>
<li><p>g++ &gt;= 11 with support for OneTBB as parallel backend</p></li>
<li><p>oneTBB &gt;= 2021</p></li>
</ul>
<p>You should be able to install cmake and g++ with your system’s package
manager (e.g., apt or homebrew). oneTBB appears to be available on
homebrew for MacOS 11.6 and later (and perhaps earlier).</p>
<p>Instructions for installing oneTBB with various Linux package managers
can be found here:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="nl">https</span><span class="p">:</span><span class="c1">//www.intel.com/content/www/us/en/developer/articles/tool/oneapi-standalone-components.html</span>
</pre></div>
</div>
<p>Installation packages for oneAPI for Linux are available on intel.com:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="nl">https</span><span class="p">:</span><span class="c1">//www.intel.com/content/www/us/en/developer/articles/tool/oneapi-standalone-components.html#onetbb</span>
</pre></div>
</div>
</section>
<section id="compilation">
<h3>Compilation<a class="headerlink" href="#compilation" title="Link to this heading"></a></h3>
<p>Basic build (tests only):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
$<span class="w"> </span>cmake<span class="w"> </span>..
$<span class="w"> </span>make<span class="w"> </span>-j8
</pre></div>
</div>
</section>
<section id="building-everything">
<h3>Building Everything<a class="headerlink" href="#building-everything" title="Link to this heading"></a></h3>
<p>To build tests, examples, and benchmarks together:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-DNWGRAPH_BUILD_TESTS<span class="o">=</span>ON<span class="w"> </span><span class="se">\</span>
<span class="w">           </span>-DNWGRAPH_BUILD_EXAMPLES<span class="o">=</span>ON<span class="w"> </span><span class="se">\</span>
<span class="w">           </span>-DNWGRAPH_BUILD_BENCH<span class="o">=</span>ON
$<span class="w"> </span>make<span class="w"> </span>-j8
</pre></div>
</div>
</section>
<section id="building-specific-components">
<h3>Building Specific Components<a class="headerlink" href="#building-specific-components" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build all benchmarks (GAP Benchmark Suite + abstraction penalty)</span>
$<span class="w"> </span>make<span class="w"> </span>bench<span class="w"> </span>-j8

<span class="c1"># Build individual benchmark executables</span>
$<span class="w"> </span>make<span class="w"> </span>bfs<span class="w"> </span>cc<span class="w"> </span>pr<span class="w"> </span>sssp<span class="w"> </span>bc<span class="w"> </span>tc<span class="w"> </span>-j8

<span class="c1"># Build BGL book examples</span>
$<span class="w"> </span>make<span class="w"> </span>ch3_toposort<span class="w"> </span>ch4_kevin_bacon<span class="w"> </span>ch5_dijkstra<span class="w"> </span>ch6_kruskal<span class="w"> </span>-j8
</pre></div>
</div>
</section>
<section id="build-output-locations">
<h3>Build Output Locations<a class="headerlink" href="#build-output-locations" title="Link to this heading"></a></h3>
<p>After building, executables are located in:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>build/
├── test/                        # Unit tests (Catch2)
│   ├── adjacency_test
│   ├── bfs_test_0
│   └── ...
├── examples/
│   └── bgl-book/                # BGL Book examples
│       ├── ch3_toposort
│       ├── ch4_kevin_bacon
│       ├── ch5_dijkstra
│       └── ...
└── bench/
    ├── gapbs/                   # GAP Benchmark Suite
    │   ├── bfs
    │   ├── sssp
    │   ├── pr
    │   ├── cc
    │   ├── bc
    │   └── tc
    └── abstraction_penalty/     # Abstraction penalty benchmarks
        ├── plain
        ├── spmv
        └── ...
</pre></div>
</div>
</section>
<section id="cmake-options">
<h3>CMake Options<a class="headerlink" href="#cmake-options" title="Link to this heading"></a></h3>
<p>To specify compiler:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-DCMAKE_CXX_COMPILER<span class="o">=</span>g++-11
</pre></div>
</div>
<p>To specify build type as Release or Debug (default is Release):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release
</pre></div>
</div>
<p>To enable/disable components:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Unit tests (ON by default)</span>
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-DNWGRAPH_BUILD_TESTS<span class="o">=</span>ON

<span class="c1"># GAP benchmarks and abstraction penalty benchmarks</span>
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-DNWGRAPH_BUILD_BENCH<span class="o">=</span>ON

<span class="c1"># BGL book examples and IMDB examples</span>
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-DNWGRAPH_BUILD_EXAMPLES<span class="o">=</span>ON
</pre></div>
</div>
<p>If cmake is not able to find TBB in its expected places, you may get an
error during the cmake step. In this case, you need to set the
<code class="docutils literal notranslate"><span class="pre">TBBROOT</span></code> environment variable to the location where oneTBB was
installed. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nv">TBBROOT</span><span class="o">=</span>/opt/intel/oneapi/tbb/2021.5.1<span class="w"> </span>cmake<span class="w"> </span>..
</pre></div>
</div>
<p>To see verbose information during compilation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>make<span class="w"> </span><span class="nv">VERBOSE</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
</section>
</section>
<section id="building-documentation">
<h2>Building Documentation<a class="headerlink" href="#building-documentation" title="Link to this heading"></a></h2>
<p>NWGraph documentation is built using Sphinx with Doxygen integration via
Breathe and Exhale.</p>
<section id="documentation-dependencies">
<h3>Documentation Dependencies<a class="headerlink" href="#documentation-dependencies" title="Link to this heading"></a></h3>
<p>Install Python dependencies:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>sphinx<span class="w"> </span>sphinx_rtd_theme<span class="w"> </span>breathe<span class="w"> </span>exhale<span class="w"> </span>sphinxcontrib-bibtex
</pre></div>
</div>
<p>Install Doxygen:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># macOS</span>
$<span class="w"> </span>brew<span class="w"> </span>install<span class="w"> </span>doxygen

<span class="c1"># Ubuntu/Debian</span>
$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>doxygen
</pre></div>
</div>
</section>
<section id="building-via-cmake">
<h3>Building via CMake<a class="headerlink" href="#building-via-cmake" title="Link to this heading"></a></h3>
<p>The recommended way to build documentation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-DNWGRAPH_BUILD_DOCS<span class="o">=</span>ON
$<span class="w"> </span>make<span class="w"> </span>docs
</pre></div>
</div>
<p>This runs Doxygen to extract API documentation and Sphinx to build the HTML pages.</p>
</section>
<section id="documentation-targets">
<h3>Documentation Targets<a class="headerlink" href="#documentation-targets" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Target</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">docs</span></code></p></td>
<td><p>Build complete documentation (Doxygen + Sphinx)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">docs-html</span></code></p></td>
<td><p>Build HTML only (faster, uses cached Doxygen output)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">docs-clean</span></code></p></td>
<td><p>Clean all built documentation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">docs-open</span></code></p></td>
<td><p>Build and open in browser (macOS/Linux)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="building-directly-with-sphinx">
<h3>Building Directly with Sphinx<a class="headerlink" href="#building-directly-with-sphinx" title="Link to this heading"></a></h3>
<p>Alternatively, build directly from the sphinx directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>doc-src/sphinx
$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
$<span class="w"> </span>make<span class="w"> </span>html
</pre></div>
</div>
<p>The built documentation is located at <code class="docutils literal notranslate"><span class="pre">doc-src/sphinx/_build/html/index.html</span></code>.</p>
</section>
</section>
<section id="running-code-in-nwgraph">
<h2>Running code in NWGraph<a class="headerlink" href="#running-code-in-nwgraph" title="Link to this heading"></a></h2>
<p>NWGraph uses command-line interface description language
<a class="reference external" href="http://docopt.org/">DOCOPT</a> to define the interface of our
command-line applications and abstraction penalty experiments.</p>
<p>A typical interface of a benchmark driver looks like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bfs:<span class="w"> </span>breadth<span class="w"> </span>first<span class="w"> </span>search<span class="w"> </span>benchmark<span class="w"> </span>driver.
<span class="w">  </span>Usage:
<span class="w">      </span>bfs<span class="w"> </span><span class="o">(</span>-h<span class="w"> </span><span class="p">|</span><span class="w"> </span>--help<span class="o">)</span>
<span class="w">      </span>bfs<span class="w"> </span>-f<span class="w"> </span>FILE<span class="w"> </span><span class="o">[</span>-r<span class="w"> </span>NODE<span class="w"> </span><span class="p">|</span><span class="w"> </span>-s<span class="w"> </span>FILE<span class="o">]</span><span class="w"> </span><span class="o">[</span>-i<span class="w"> </span>NUM<span class="o">]</span><span class="w"> </span><span class="o">[</span>-a<span class="w"> </span>NUM<span class="o">]</span><span class="w"> </span><span class="o">[</span>-b<span class="w"> </span>NUM<span class="o">]</span><span class="w"> </span><span class="o">[</span>-B<span class="w"> </span>NUM<span class="o">]</span><span class="w"> </span><span class="o">[</span>-n<span class="w"> </span>NUM<span class="o">]</span><span class="w"> </span><span class="o">[</span>--seed<span class="w"> </span>NUM<span class="o">]</span><span class="w"> </span><span class="o">[</span>--version<span class="w"> </span>ID...<span class="o">]</span><span class="w"> </span><span class="o">[</span>--log<span class="w"> </span>FILE<span class="o">]</span><span class="w"> </span><span class="o">[</span>--log-header<span class="o">]</span><span class="w"> </span><span class="o">[</span>-dvV<span class="o">]</span><span class="w"> </span><span class="o">[</span>THREADS<span class="o">]</span>...

<span class="w">  </span>Options:
<span class="w">      </span>-h,<span class="w"> </span>--help<span class="w">              </span>show<span class="w"> </span>this<span class="w"> </span>screen
<span class="w">      </span>-f<span class="w"> </span>FILE<span class="w">                 </span>input<span class="w"> </span>file<span class="w"> </span>path
<span class="w">      </span>-i<span class="w"> </span>NUM<span class="w">                  </span>number<span class="w"> </span>of<span class="w"> </span>iteration<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span><span class="m">1</span><span class="o">]</span>
<span class="w">      </span>-a<span class="w"> </span>NUM<span class="w">                  </span>alpha<span class="w"> </span>parameter<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span><span class="m">15</span><span class="o">]</span>
<span class="w">      </span>-b<span class="w"> </span>NUM<span class="w">                  </span>beta<span class="w"> </span>parameter<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span><span class="m">18</span><span class="o">]</span>
<span class="w">      </span>-B<span class="w"> </span>NUM<span class="w">                  </span>number<span class="w"> </span>of<span class="w"> </span>bins<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span><span class="m">32</span><span class="o">]</span>
<span class="w">      </span>-n<span class="w"> </span>NUM<span class="w">                  </span>number<span class="w"> </span>of<span class="w"> </span>trials<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span><span class="m">1</span><span class="o">]</span>
<span class="w">      </span>-r<span class="w"> </span>NODE<span class="w">                 </span>start<span class="w"> </span>from<span class="w"> </span>node<span class="w"> </span>r<span class="w"> </span><span class="o">(</span>default<span class="w"> </span>is<span class="w"> </span>random<span class="o">)</span>
<span class="w">      </span>-s,<span class="w"> </span>--sources<span class="w"> </span>FILE<span class="w">      </span>sources<span class="w"> </span>file
<span class="w">      </span>--seed<span class="w"> </span>NUM<span class="w">              </span>random<span class="w"> </span>seed<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span><span class="m">27491095</span><span class="o">]</span>
<span class="w">      </span>--version<span class="w"> </span>ID<span class="w">            </span>algorithm<span class="w"> </span>version<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span><span class="m">0</span><span class="o">]</span>
<span class="w">      </span>--log<span class="w"> </span>FILE<span class="w">              </span>log<span class="w"> </span><span class="nb">times</span><span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>file
<span class="w">      </span>--log-header<span class="w">            </span>add<span class="w"> </span>a<span class="w"> </span>header<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>log<span class="w"> </span>file
<span class="w">      </span>-d,<span class="w"> </span>--debug<span class="w">             </span>run<span class="w"> </span><span class="k">in</span><span class="w"> </span>debug<span class="w"> </span>mode
<span class="w">      </span>-v,<span class="w"> </span>--verify<span class="w">            </span>verify<span class="w"> </span>results
<span class="w">      </span>-V,<span class="w"> </span>--verbose<span class="w">           </span>run<span class="w"> </span><span class="k">in</span><span class="w"> </span>verbose<span class="w"> </span>mode
</pre></div>
</div>
<p>The applications takes options followed by the arguments of the options
as inputs. A minimal example takes a graph as input is as follow:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./build/bench/gapbs/bfs<span class="w"> </span>-f<span class="w"> </span>test/data/karate.mtx
</pre></div>
</div>
</section>
<section id="supported-graph-file-format">
<h2>Supported graph file format<a class="headerlink" href="#supported-graph-file-format" title="Link to this heading"></a></h2>
<p>NWGraph recogonizes the following types of file format: * <a class="reference external" href="https://math.nist.gov/MatrixMarket/formats.html">Matrix
Market Exchange
Formats</a></p>
</section>
<section id="running-benchmarks">
<h2>Running benchmarks<a class="headerlink" href="#running-benchmarks" title="Link to this heading"></a></h2>
<p>We have six main benchmarks: Breadth-first Search, Betweenness Centrality,
Connected Component Decomposition, PageRank, Single Source Shortest Path,
and Triangle Counting.</p>
<p>First, build the benchmarks:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-DNWGRAPH_BUILD_BENCH<span class="o">=</span>ON
$<span class="w"> </span>make<span class="w"> </span>bench<span class="w"> </span>-j8
</pre></div>
</div>
<section id="breadth-first-search">
<h3>Breadth-first Search<a class="headerlink" href="#breadth-first-search" title="Link to this heading"></a></h3>
<p>The default sequential version of BFS is version 0 (default). The
fastest parallel version of BFS is version 11, the direction-optimizing
BFS. As an alternative to specifying one seed at a time, one or more
sources can be provided in a Matrix Market format file as an input of
BFS driver. Also, number of trials can be specified with <code class="docutils literal notranslate"><span class="pre">-n</span></code>. In this
way, if no seed or seed file is provided, each trial will generate one
random number from 0 to |V|-1 as the random source for BFS as an input.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bench/gapbs/bfs<span class="w"> </span>-f<span class="w"> </span>../test/data/karate.mtx<span class="w"> </span>--seed<span class="w"> </span><span class="m">0</span><span class="w"> </span>--version<span class="w"> </span><span class="m">11</span><span class="w"> </span>-n<span class="w"> </span><span class="m">3</span>
</pre></div>
</div>
</section>
<section id="connected-component-decomposition">
<h3>Connected Component Decomposition<a class="headerlink" href="#connected-component-decomposition" title="Link to this heading"></a></h3>
<p>The default sequential version of CC is version 0 (default). The fastest
parallel version of CC is version 7, Afforest.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bench/gapbs/cc<span class="w"> </span>-f<span class="w"> </span>../test/data/karate.mtx<span class="w"> </span>--relabel<span class="w"> </span>--direction<span class="w"> </span>ascending
</pre></div>
</div>
</section>
<section id="pagerank">
<h3>PageRank<a class="headerlink" href="#pagerank" title="Link to this heading"></a></h3>
<p>The fastest parallel version of PR is version 11 (default). The max
iterations can be set with <code class="docutils literal notranslate"><span class="pre">-i</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bench/gapbs/pr<span class="w"> </span>-f<span class="w"> </span>../test/data/karate.mtx<span class="w"> </span>-i<span class="w"> </span><span class="m">1000</span>
</pre></div>
</div>
</section>
<section id="single-source-shortest-path">
<h3>Single Source Shortest Path<a class="headerlink" href="#single-source-shortest-path" title="Link to this heading"></a></h3>
<p>The default sequential version of SSSP is version 0 (default). The
fastest parallel version of SSSP is version 12, Delta-stepping. As an
alternative to specifying one seed at a time, one or more sources can be
provided in a Matrix Market format file as an input of SSSP driver.
Also, number of trials can be specified with <code class="docutils literal notranslate"><span class="pre">-n</span></code>. In this way, if no
seed or seed file is provided, each trial will generate one random
number from 0 to |V|-1 as the random source for SSSP as an input.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bench/gapbs/sssp<span class="w"> </span>-f<span class="w"> </span>../test/data/karate.mtx<span class="w"> </span>--seed<span class="w"> </span><span class="m">0</span><span class="w"> </span>-n<span class="w"> </span><span class="m">3</span>
</pre></div>
</div>
</section>
<section id="triangle-counting">
<h3>Triangle Counting<a class="headerlink" href="#triangle-counting" title="Link to this heading"></a></h3>
<p>The default sequential version of TC is version 0 (default). The fastest
parallel version of TC is version 4.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bench/gapbs/tc<span class="w"> </span>-f<span class="w"> </span>../test/data/karate.mtx<span class="w"> </span>--version<span class="w"> </span><span class="m">4</span><span class="w"> </span>--relabel<span class="w"> </span>--upper
</pre></div>
</div>
</section>
<section id="betweenness-centrality">
<h3>Betweenness Centrality<a class="headerlink" href="#betweenness-centrality" title="Link to this heading"></a></h3>
<p>The default sequential version of BC is version 0 (default). The fastest
parallel version of BC is version 5. As an alternative to specifying one
seed at a time, one or more sources can be provided in a Matrix Market
format file as an input of BC driver.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bench/gapbs/bc<span class="w"> </span>-f<span class="w"> </span>../test/data/karate.mtx<span class="w"> </span>--version<span class="w"> </span><span class="m">5</span><span class="w"> </span>--seed<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
</section>
<section id="other-useful-things">
<h3>Other useful things<a class="headerlink" href="#other-useful-things" title="Link to this heading"></a></h3>
<p>Note that the following features may or may not be available for every
benchmark.</p>
<section id="relabel-by-degree">
<h4>Relabel-by-degree<a class="headerlink" href="#relabel-by-degree" title="Link to this heading"></a></h4>
<p>Relabel vertex by degree (also known as column/row permutation in
matrix-matrix multiplication) may speed up the performance of the graph
algorithm. It can improve the workload distribution and memory access
pattern of the algorithm itself. To enable relabel-by-degree and relabel
the degree of vertices in ascending order:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bench/gapbs/cc<span class="w"> </span>-f<span class="w"> </span>../test/data/karate.mtx<span class="w"> </span>--relabel<span class="w"> </span>--direction<span class="w"> </span>ascending
</pre></div>
</div>
</section>
<section id="upper-triangular-order">
<h4>Upper Triangular Order<a class="headerlink" href="#upper-triangular-order" title="Link to this heading"></a></h4>
<p>In triangle counting, it allows to relabel the graph in upper/lower
triangular order. This will greatly improve the performance of the
algorithm. To enable relabel-by-degree and relabel the degree of
vertices in upper triangular order:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bench/gapbs/tc<span class="w"> </span>-f<span class="w"> </span>../test/data/karate.mtx<span class="w"> </span>--relabel<span class="w"> </span>--upper
</pre></div>
</div>
</section>
<section id="verifier">
<h4>Verifier<a class="headerlink" href="#verifier" title="Link to this heading"></a></h4>
<p>We implement a verifier in each benchmark to verify the correctness of
the algorithms. To enable the verification of the algorithm:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bench/gapbs/cc<span class="w"> </span>-f<span class="w"> </span>../test/data/karate.mtx<span class="w"> </span>-v
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bench/gapbs/cc<span class="w"> </span>-f<span class="w"> </span>../test/data/karate.mtx<span class="w"> </span>--verify
</pre></div>
</div>
</section>
<section id="multi-threading">
<h4>Multi-threading<a class="headerlink" href="#multi-threading" title="Link to this heading"></a></h4>
<p>Each algorithm/benchmark has both sequential version and parallel
version. When a parallel algorithm is selected, multi-threading is
enable by default. The number of threads is set to be the maximum
available core on the machine. To enable multi-threading with different
thread number, such as 128 threads:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bench/gapbs/cc<span class="w"> </span>-f<span class="w"> </span>../test/data/karate.mtx<span class="w"> </span><span class="m">128</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="benchmarking-with-gap-datasets">
<h2>Benchmarking with GAP Datasets<a class="headerlink" href="#benchmarking-with-gap-datasets" title="Link to this heading"></a></h2>
<p>For detailed information about the GAP Benchmark Suite datasets, see
<a class="reference internal" href="benchmarking.html"><span class="doc">Benchmarking with NWGraph</span></a>.</p>
<p>To download the GAP graphs:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show available graphs</span>
$<span class="w"> </span>./scripts/download_gap_graphs.sh<span class="w"> </span>--list

<span class="c1"># Download the road network (smallest, good for testing)</span>
$<span class="w"> </span>./scripts/download_gap_graphs.sh<span class="w"> </span>road

<span class="c1"># Download all real-world graphs</span>
$<span class="w"> </span>./scripts/download_gap_graphs.sh<span class="w"> </span>all
</pre></div>
</div>
<p>Then run benchmarks with the downloaded graphs. Note that BFS and SSSP
are run with 64 sources, BC with 4 sources, and PR with 1000 iterations.</p>
</section>
<section id="benchmarking-abstraction-penalties">
<h2>Benchmarking abstraction penalties<a class="headerlink" href="#benchmarking-abstraction-penalties" title="Link to this heading"></a></h2>
<section id="what-is-abstraction-penalty">
<h3>What is abstraction penalty?<a class="headerlink" href="#what-is-abstraction-penalty" title="Link to this heading"></a></h3>
<p>There are two types of abstraction penalties here. Using a range-based
interface introduces a variety of different ways to iterate through a
graph (including the use of graph adaptors). While ranges and range
based for loops are useful programming abstractions, it is important to
consider any performance abstraction penalties associated with their
use. We benchmark these penalties to ensure they will not significantly
limit performance compared to a raw for loop implementation.</p>
<p>We also evaluated the abstraction penalty incurred for storing a graph
in different containers. In particular, we have selected
<code class="docutils literal notranslate"><span class="pre">struct_of_array</span></code>, <code class="docutils literal notranslate"><span class="pre">vector_of_vector</span></code>, <code class="docutils literal notranslate"><span class="pre">vector_of_list</span></code>,
<code class="docutils literal notranslate"><span class="pre">vector_of_forward_list</span></code> containers.</p>
</section>
<section id="running-abstraction-penalty-experiments">
<h3>Running abstraction penalty experiments<a class="headerlink" href="#running-abstraction-penalty-experiments" title="Link to this heading"></a></h3>
<p>First, build the abstraction penalty benchmarks:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cmake<span class="w"> </span>..<span class="w"> </span>-DNWGRAPH_BUILD_BENCH<span class="o">=</span>ON
$<span class="w"> </span>make<span class="w"> </span>bench<span class="w"> </span>-j8
</pre></div>
</div>
<p>For example let us consider the sparse matrix-dense vector
multiplication (SpMV) kernel used in page rank, which multiplies the
adjacency matrix representation of a graph by a dense vector x and
stores the result in another vector y. To experimentally evaluate the
abstraction penalty of different ways to iterate through a graph:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bench/abstraction_penalty/spmv<span class="w"> </span>-f<span class="w"> </span>../test/data/karate.mtx
</pre></div>
</div>
<p>To experimentally evaluate the abstraction penalty of different
containers for storing a graph:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./bench/abstraction_penalty/containers<span class="w"> </span>-f<span class="w"> </span>../test/data/karate.mtx<span class="w"> </span>--format<span class="w"> </span>CSR<span class="w"> </span>--format<span class="w"> </span>VOV<span class="w"> </span>--format<span class="w"> </span>VOL<span class="w"> </span>--format<span class="w"> </span>VOF
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to the Documentation for NW Graph!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="benchmarking.html" class="btn btn-neutral float-right" title="Benchmarking with NWGraph" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2022, PNNL, UW.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>